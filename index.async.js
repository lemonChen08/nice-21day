"use strict";(self.webpackChunk_nice_21day_web=self.webpackChunk_nice_21day_web||[]).push([[826],{78736:function(J,h,a){a.r(h),a.d(h,{default:function(){return b}});var Q=a(44295),p=a(50691),H=a(73492),F=a(86605),K=a(13544),C=a(86949),X=a(13418),N=a(94107),$=a(25453),m=a(43574),w=a(34361),r=a(94515),k=a(98277),g=a(93139),q=a(95089),j=a(63973),_=a(8471),f=a(62047),ee=a(30584),x=a(38404),Z=a(60306),v=a.n(Z),E=a(53197),A=a.n(E),D=a(75444),I=a.n(D),P=a(34332),B=a(58757),T=a(56828),U=a.n(T),S=a.p+"static/template.66b43c72.jpeg",u={content:"content___fr8u_",template:"template___zkSLt","training-title":"training-title___BKg_f",user:"user___YC4ZP",user__avatar:"user__avatar___sQVM3",user__name:"user__name___otWR8",result:"result___ztgYS","result-metric__value":"result-metric__value___cD8hQ","result-metric__label":"result-metric__label___V2X5D"},e=a(48902),L=["userAvatarUpload"],R=function(c,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(c)},V=["\u5B66\u4E60\u8BAD\u7EC3\u8425"];function b(){var y=(0,B.useState)({}),c=I()(y,2),t=c[0],n=c[1],M=function(l,i){var d=l.userAvatarUpload,o=A()(l,L);n(function(Y){return v()(v()({},Y),o)})},O=function(l){var i="".concat(l.userName,"_21\u5929").concat(l.trainingName,"\u7B2C").concat(l.trainingNo,"\u671F.jpg");U()(document.getElementById("template")).then(function(d){var o=document.createElement("a");o.href=d.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream"),o.download=i,o.click()})},z=function(l){var i=l.type==="image/jpeg"||l.type==="image/png";i||x.default.error("\u53EA\u80FD\u4E0A\u4F20 JPG/PNG \u7C7B\u578B\u7684\u56FE\u7247");var d=l.size/1024/1024<2;return d||x.default.error("\u56FE\u7247\u4E0D\u80FD\u8D85\u8FC7 2MB"),!1},G=function(l){R(l.file,function(i){n(function(d){return v()(v()({},d),{},{userAvatar:i})})})},W=(0,B.useMemo)(function(){return[{label:"\u6253\u5361\u5929\u6570",value:t.clockDays},{label:"\u603B\u76EE\u6807\u6570",value:t.totalTargetCount},{label:"\u603B\u79EF\u5206\u6570",value:t.totalPoints}]},[t.clockDays,t.totalTargetCount,t.totalPoints]);return(0,e.jsxs)(p.Z,{gutter:10,className:u.content,children:[(0,e.jsx)(f.Z,{span:12,children:(0,e.jsxs)("div",{className:u.template,id:"template",children:[(0,e.jsx)("img",{src:S}),(0,e.jsxs)("div",{className:u["training-title"],children:["21\u5929",t.trainingName||"--","\u7B2C",t.trainingNo||"--","\u671F"]}),(0,e.jsxs)("div",{className:u.user,children:[(0,e.jsx)("div",{className:u.user__avatar,children:(0,e.jsx)("img",{src:t.userAvatar})}),(0,e.jsx)("div",{className:u.user__name,children:t.userName})]}),(0,e.jsx)("div",{className:u.result,children:W.map(function(s){return(0,e.jsxs)("div",{className:u["result-metric"],children:[(0,e.jsx)("div",{className:u["result-metric__value"],children:s.value||0}),(0,e.jsx)("div",{className:u["result-metric__label"],children:s.label})]},s.label)})})]})}),(0,e.jsx)(f.Z,{span:8,children:(0,e.jsxs)(r.Z,{labelCol:{span:6},onValuesChange:M,onFinish:O,children:[(0,e.jsx)(j.Z,{orientation:"left",children:"\u8BAD\u7EC3\u8425\u8BBE\u7F6E"}),(0,e.jsx)(r.Z.Item,{name:"trainingName",label:"\u8BAD\u7EC3\u8425",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BAD\u7EC3\u8425\u7C7B\u578B"}],children:(0,e.jsx)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u8BAD\u7EC3\u8425\u7C7B\u578B",children:V.map(function(s){return(0,e.jsx)(g.Z.Option,{value:s,children:s},s)})})}),(0,e.jsx)(r.Z.Item,{name:"trainingNo",label:"\u8BAD\u7EC3\u8425\u671F\u6570",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BAD\u7EC3\u8425\u671F\u6570"}],children:(0,e.jsx)(m.Z,{min:1,max:999,placeholder:"\u8BF7\u8F93\u5165\u8BAD\u7EC3\u8425\u671F\u6570",style:{width:"100%"}})}),(0,e.jsx)(j.Z,{orientation:"left",children:"\u5B66\u5458\u8BBE\u7F6E"}),(0,e.jsx)(r.Z.Item,{name:"userName",label:"\u5B66\u5458\u59D3\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B66\u5458\u59D3\u540D"}],children:(0,e.jsx)(N.Z,{placeholder:"\u8BF7\u8F93\u5165\u5B66\u5458\u59D3\u540D"})}),(0,e.jsx)(r.Z.Item,{name:"userAvatarUpload",label:"\u5B66\u5458\u5934\u50CF",valuePropName:"file",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u5B66\u5458\u5934\u50CF"}],children:(0,e.jsx)(C.Z,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:z,onChange:G,children:t.userAvatar?(0,e.jsx)("img",{src:t.userAvatar,alt:"avatar",style:{height:"100%"}}):(0,e.jsxs)("div",{children:[(0,e.jsx)(P.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:"\u9009\u62E9\u56FE\u7247"})]})})}),(0,e.jsx)(r.Z.Item,{name:"clockDays",label:"\u6253\u5361\u5929\u6570",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6253\u5361\u5929\u6570"}],children:(0,e.jsx)(m.Z,{min:0,max:21,placeholder:"\u8BF7\u8F93\u5165\u6253\u5361\u5929\u6570",style:{width:"100%"}})}),(0,e.jsx)(r.Z.Item,{name:"totalTargetCount",label:"\u603B\u76EE\u6807\u6570",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u603B\u76EE\u6807\u6570"}],children:(0,e.jsx)(m.Z,{min:0,max:99,placeholder:"\u8BF7\u8F93\u5165\u603B\u76EE\u6807\u6570",style:{width:"100%"}})}),(0,e.jsx)(r.Z.Item,{name:"totalPoints",label:"\u603B\u79EF\u5206",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u603B\u79EF\u5206"}],children:(0,e.jsx)(m.Z,{min:0,max:99,placeholder:"\u8BF7\u8F93\u5165\u603B\u79EF\u5206",style:{width:"100%"}})}),(0,e.jsx)(r.Z.Item,{wrapperCol:{offset:6},children:(0,e.jsx)(F.default,{type:"primary",htmlType:"submit",children:"\u751F\u6210\u8BC1\u4E66"})})]})})]})}}}]);
